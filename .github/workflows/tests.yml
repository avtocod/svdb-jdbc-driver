name: tests

on:
  push:
    branches: [ master ]
  pull_request:
    branches: [ master ]

jobs:
  test:
    runs-on: 'ubuntu-latest'
    steps:
      - id: 'step-0'
        name: 'Check out'
        with:
          lfs: true
        uses: 'actions/checkout@v4'
      - id: 'step-1'
        name: 'Setup kotlin'
        uses: 'fwilhe2/setup-kotlin@main'
      - id: 'step-2'
        name: 'Tests'
        run: './gradlew test'
      - id: 'step-3'
        name: 'Build'
        run: './gradlew :jdbc:fatJar'